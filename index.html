<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>QR æ™‚é–“åŒæ­¥å·¥å…· â±ï¸ğŸ“¸</title>
  <style>
    body {
      font-family: 'Noto Sans TC', sans-serif;
      text-align: center;
      background-color: #fff8dc;
      color: #222;
      margin: 0;
      padding: 20px;
    }

    h1 {
      font-size: 2.2em;
      margin-bottom: 10px;
    }

    #time {
      font-size: 2.8em;
      font-weight: bold;
      margin: 15px 0;
      letter-spacing: 2px;
    }

    #qrcode {
      margin-top: 20px;
    }

    label {
      font-weight: bold;
    }

    select {
      font-size: 1em;
      padding: 6px;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h1>ğŸ“· æ™‚é–“ QR å°æ™‚é </h1>
  <div>
    <label for="format">æ™‚é–“æ ¼å¼ï¼š</label>
    <select id="format">
      <option value="YYYY-MM-DD HH:mm:ss">è¥¿å…ƒå¹´æœˆæ—¥ æ™‚:åˆ†:ç§’</option>
      <option value="YYYY/MM/DD HH:mm:ss">è¥¿å…ƒå¹´æœˆæ—¥ï¼ˆæ–œç·šï¼‰</option>
      <option value="YYYYå¹´MMæœˆDDæ—¥ HHé»mmåˆ†ssç§’">ä¸­æ–‡æ ¼å¼</option>
      <option value="æ°‘åœ‹YYå¹´MMæœˆDDæ—¥ HH:mm:ss">æ°‘åœ‹æ ¼å¼</option>
    </select>
  </div>
  <div id="time">è®€å–ä¸­...</div>
  <div id="qrcode"></div>

  <!-- å¼•å…¥ moment.js èˆ‡ QRCode.js -->
  <script src="https://cdn.jsdelivr.net/npm/moment@2.29.4/moment.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/moment/locale/zh-tw.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>

  <script>
    moment.locale('zh-tw');
    const timeDiv = document.getElementById('time');
    const qrDiv = document.getElementById('qrcode');
    const formatSelect = document.getElementById('format');

    let qr = new QRCode(qrDiv, {
      width: 256,
      height: 256
    });

    function getNowFormatted(fmt) {
      const now = moment();
      if (fmt === 'æ°‘åœ‹YYå¹´MMæœˆDDæ—¥ HH:mm:ss') {
        const roc = now.year() - 1911;
        return `æ°‘åœ‹${roc}å¹´${now.format('MMæœˆDDæ—¥ HH:mm:ss')}`;
      }
      return now.format(fmt);
    }

    function updateTimeAndQR() {
      const fmt = formatSelect.value;
      const currentTime = getNowFormatted(fmt);
      timeDiv.textContent = currentTime;
      qr.clear();
      qr.makeCode(currentTime);
    }

    setInterval(updateTimeAndQR, 1000);
    formatSelect.addEventListener('change', updateTimeAndQR);
    updateTimeAndQR(); // åˆå§‹åŒ–
  </script>
</body>
</html>
